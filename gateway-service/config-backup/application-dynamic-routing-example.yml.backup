# Example configuration for dynamic routing
gateway:
  routes:
    - id: user-service-routes
      uri: http://localhost:8081
      predicates:
        - name: Path
          args:
            pattern: /user/**
      filters:
        - name: CircuitBreaker
          args:
            name: user-service-cb
            fallbackUri: forward:/fallback/user
        - name: Retry
          args:
            retries: 3
        - name: AddRequestHeader
          args:
            name: X-Gateway-Source
            value: dynamic-routing
      metadata:
        timeout: 5000
        enabled: true
        order: 1
        
    - id: product-service-routes  
      uri: http://localhost:8082
      predicates:
        - name: Path
          args:
            pattern: /product/**
        - name: Method
          args:
            method: GET,POST
      filters:
        - name: CircuitBreaker
          args:
            name: product-service-cb
            fallbackUri: forward:/fallback/product
        - name: StripPrefix
          args:
            parts: 1
      metadata:
        timeout: 3000
        enabled: true
        order: 2
        
    - id: admin-service-routes
      uri: http://localhost:8083
      predicates:
        - name: Path
          args:
            pattern: /admin/**
        - name: Header
          args:
            header: X-Admin-Token
            regexp: admin-.*
      filters:
        - name: AddResponseHeader
          args:
            name: X-Admin-Response
            value: processed
      metadata:
        timeout: 10000
        enabled: false  # Disabled route
        order: 10